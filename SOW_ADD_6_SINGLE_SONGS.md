# SOW: 6曲のシングル楽曲をSongs&Lyricsに追加

## 概要
appriver公式サイトのSongs&Lyrics（楽曲・歌詞）セクションに、6曲の新しいシングル楽曲を追加する。本番環境に影響を与えずに段階的に実装する。

## 現状分析

### 現在の楽曲データ状況
**songs-data.js** に収録されている楽曲：
- **現在の総楽曲数**: 38曲
- **NUKUMORIアルバム収録**: 14曲
- **YASURAGIアルバム収録**: 20曲
- **単独リリース**: 4曲（アルバム外シングル）
- **実際のカード表示数**: 38枚
- **新規追加予定**: 6曲（シングル楽曲）

### 楽曲構成詳細
**現在の単独シングル（4曲）**:
- いのちの理由、君の影、心の羽、時間をこえて

**追加予定（6曲）**:
1. [シングル曲名1] - 楽曲情報待ち
2. [シングル曲名2] - 楽曲情報待ち
3. [シングル曲名3] - 楽曲情報待ち
4. [シングル曲名4] - 楽曲情報待ち
5. [シングル曲名5] - 楽曲情報待ち
6. [シングル曲名6] - 楽曲情報待ち

## 要件

### 機能要件
1. **楽曲データの追加**
   - 6曲のシングル楽曲をsongs-data.jsに追加
   - Songs&Lyricsセクションで表示・検索・ソート対応
   - カード表示数: 38枚 → 44枚

2. **データ構造の統一性**
   - 既存の楽曲データ構造を維持
   - シングル楽曲設定（album: "", albumReading: ""）
   - 各楽曲の個別リリース日設定

3. **音楽プレーヤー対応**
   - YouTube動画IDは設定しない（今後も使用予定なし）
   - 配信リンク（linkUrl）の設定

### 技術要件
1. **本番環境影響なし**
   - 現在のブランチでの安全な開発
   - バックアップファイル作成による安全性確保
   - 段階的実装によるリスク最小化

2. **パフォーマンス考慮**
   - 楽曲カード数増加（38枚→44枚）による読み込み速度への影響確認
   - 検索・ソート機能の動作速度確認
   - データ量増加への対応

## 必要な楽曲データ項目

各楽曲について以下の情報が必要：

```javascript
{
  title: "楽曲名",
  reading: "楽曲名読み（ひらがな）",
  album: "",  // シングル楽曲のため空文字
  albumReading: "",  // シングル楽曲のため空文字
  releaseDate: "2025-XX-XX",  // 各楽曲の個別リリース日
  linkUrl: "配信リンクURL",
  youtubeVideoId: "",  // 使用しない
  lyrics: `歌詞テキスト`
}
```

## 実装手順

### Phase 1: 開発準備
1. **楽曲情報の収集**
   - 6曲のシングル楽曲詳細情報取得
   - YouTube Video ID、配信リンクの準備
   - 歌詞データの準備

2. **安全性確保**
   ```bash
   cp songs-data.js songs-data.js.backup-single-6-songs-$(date +%Y%m%d-%H%M%S)
   ```

### Phase 2: 楽曲データ実装
1. **songs-data.js 拡張**
   - 6曲のシングル楽曲データ追加
   - データ構造の統一性確認
   - ID命名規則の統一

2. **データ整合性チェック**
   - 全楽曲のフォーマット統一確認
   - youtubeVideoId設定確認
   - linkUrl設定確認
   - 歌詞データの完全性確認

### Phase 3: 表示機能確認
1. **Songs&Lyrics表示テスト**
   - 50枚のカード表示確認
   - シングル楽曲の個別表示確認
   - 検索機能の動作確認
   - ソート機能の動作確認（リリース日順）

2. **音楽プレーヤー動作確認**
   - YouTubeプレーヤーでの再生確認
   - 楽曲切り替え機能確認
   - プレイリスト機能確認

### Phase 4: 本番反映
1. **ローカル環境テスト**
   - 機能動作確認
   - レスポンシブデザイン確認
   - パフォーマンス確認

2. **本番環境反映**
   - ファイル更新
   - 本番動作確認
   - ロールバック準備

## リスク要因と対策

### 1. データ量増加リスク
**リスク**: 楽曲カード数増加（+6枚、約16%増加）による読み込み速度への影響
**対策**: 
- 段階的な追加での影響測定
- ローカルキャッシュの活用
- 画像最適化の継続

### 2. 楽曲情報不備リスク  
**リスク**: YouTube Video IDや歌詞データの不備
**対策**:
- 実装前の楽曲情報完全性チェック
- プレースホルダー対応
- 段階的な情報更新対応

### 3. 検索・ソート性能リスク
**リスク**: 楽曲数増加による検索・ソート処理への影響
**対策**:
- 検索インデックスの最適化
- クライアントサイド処理の効率化

### 4. 本番環境影響リスク
**リスク**: データ追加による既存機能への影響
**対策**:
- バックアップファイルの作成
- 段階的テスト・実装
- ロールバック計画の準備

## 成功基準

### 必須要件
- [ ] 6曲のシングル楽曲すべてがSongs&Lyricsに表示される
- [ ] 楽曲カード数が44枚表示される
- [ ] 検索機能で全楽曲が検索対象となる
- [ ] ソート機能が正常動作する（リリース日、曲名など）
- [ ] YouTubeプレーヤーで全楽曲が再生可能
- [ ] 既存機能（NUKUMORI楽曲、YASURAGI楽曲、既存シングル）に影響がない

### 追加要件
- [ ] 楽曲表示順序が適切（最新リリース優先等）
- [ ] モバイル・デスクトップでの表示最適化
- [ ] アクセシビリティ対応維持
- [ ] ページ読み込み速度の維持

## 開発スケジュール

| フェーズ | 作業内容 | 想定時間 | 完了条件 |
|---------|---------|---------|---------|
| Phase 1 | 楽曲情報収集・開発準備 | 30分 | 6曲分の完全な楽曲データ準備完了 |
| Phase 2 | 楽曲データ実装 | 1時間 | songs-data.js更新完了 |
| Phase 3 | 表示機能確認 | 45分 | 全機能動作確認完了 |
| Phase 4 | 本番反映 | 15分 | 本番環境更新完了 |

**総想定時間**: 2時間30分

## 楽曲データテンプレート

実装時に使用するデータ構造テンプレート：

```javascript
// シングル楽曲データ追加例
single_song_id: {
  title: "[楽曲名]",
  reading: "[楽曲名読み]",
  album: "",  // シングル楽曲のため空文字
  albumReading: "",  // シングル楽曲のため空文字
  releaseDate: "2025-XX-XX",  // 個別リリース日
  linkUrl: "[配信リンクURL]",
  youtubeVideoId: "[YouTube動画ID]",
  lyrics: `[歌詞テキスト]`
},
```

## ID命名規則

新規楽曲のIDは以下の規則で設定：
- 日本語楽曲名をローマ字変換
- スペース・記号は除去
- 既存IDとの重複チェック

例：
- 「新しい夢」→ `atarashiiyume`
- 「君への想い」→ `kimihenoornoi`

## 完了後の確認事項

1. **楽曲一覧確認**
   - Songs&Lyricsで44枚のカード表示確認
   - 新規6曲の個別表示確認

2. **機能動作確認**  
   - アルバム別表示機能（NUKUMORI/YASURAGI/シングル）
   - 検索機能での全楽曲ヒット確認
   - ソート機能の正常動作
   - 音楽プレーヤーでの再生確認

3. **パフォーマンス確認**
   - ページ読み込み速度確認
   - 検索・ソート応答速度確認

4. **クロスデバイス確認**
   - デスクトップ・タブレット・モバイルでの表示確認
   - 各ブラウザでの動作確認

## 安全なデプロイ手順

### 1. 事前準備
```bash
# 現在のファイルをバックアップ
cp songs-data.js songs-data.js.backup-single-6-songs-$(date +%Y%m%d-%H%M%S)

# 現在の楽曲数を確認
grep -c "title:" songs-data.js
```

### 2. 段階的実装
- 1曲ずつ追加してテスト
- 各段階での動作確認
- 問題発生時の即座のロールバック

### 3. ロールバック準備
```bash
# 問題発生時のロールバック手順
cp songs-data.js.backup-single-6-songs-YYYYMMDD-HHMMSS songs-data.js
```

---

**重要**: 
- 実装開始前に6曲分の完全な楽曲情報（楽曲名、読み、歌詞、YouTube ID、配信リンク）が必要
- 各段階での動作確認を徹底し、問題発生時は即座にロールバック
- 本番環境での影響を最小化するため、ピークアクセス時間外での実装を推奨